{% extends 'base.html' %}

{% block title %}{{ product.name }} - ABC Toys{% endblock %}

{% block content %}
<div class="container py-5">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'products' %}">Products</a></li>
            <li class="breadcrumb-item active">{{ product.name }}</li>
        </ol>
    </nav>
    
    <div class="row">
        <!-- Product Image -->
        <div class="col-md-6">
            <div class="card border-0">
                <img src="https://via.placeholder.com/500x400/4a90e2/ffffff?text={{ product.name }}" 
                     class="img-fluid rounded" alt="{{ product.name }}">
            </div>
        </div>
        
        <!-- Product Info -->
        <div class="col-md-6">
            <div class="mb-3">
                <span class="badge bg-primary">{{ product.category.name }}</span>
                <span class="badge bg-success ms-2">{{ product.get_age_group_display }}</span>
                {% if product.is_featured %}
                <span class="badge bg-warning ms-2">Featured</span>
                {% endif %}
            </div>
            
            <h1 class="mb-3">{{ product.name }}</h1>
            
            <!-- Rating -->
            {% if product.rating > 0 %}
            <div class="mb-3">
                <span class="text-warning">
                    {% for i in "12345" %}
                        {% if forloop.counter <= product.rating %}
                        <i class="fas fa-star"></i>
                        {% else %}
                        <i class="far fa-star"></i>
                        {% endif %}
                    {% endfor %}
                </span>
                <span class="text-muted ms-2">(Rating: {{ product.rating }}/5)</span>
            </div>
            {% endif %}
            
            <h2 class="text-primary mb-4">${{ product.price }}</h2>
            
            <div class="mb-4">
                <h5>Description</h5>
                <p>{{ product.description }}</p>
            </div>
            
            <div class="mb-4">
                <h5>Product Details</h5>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i> Age Group: {{ product.get_age_group_display }}</li>
                    <li><i class="fas fa-check text-success me-2"></i> Category: {{ product.category.name }}</li>
                    <li><i class="fas fa-check text-success me-2"></i> Stock Status: 
                        {% if product.in_stock %}
                        <span class="text-success">In Stock ({{ product.stock_quantity }} available)</span>
                        {% else %}
                        <span class="text-danger">Out of Stock</span>
                        {% endif %}
                    </li>
                </ul>
            </div>
            
            <div class="d-flex gap-3 mb-5">
                <button class="btn btn-primary btn-lg flex-grow-1 add-to-cart"
                        data-product-id="{{ product.id }}"
                        data-product-name="{{ product.name }}"
                        {% if not product.in_stock %}disabled{% endif %}>
                    <i class="fas fa-cart-plus"></i> Add to Cart
                </button>
                <button class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-heart"></i> Wishlist
                </button>
            </div>
        </div>
    </div>
    
    <!-- Related Products -->
    {% if related_products %}
    <div class="mt-5 pt-5 border-top">
        <h3 class="mb-4">You May Also Like</h3>
        <div class="row">
            {% for related in related_products %}
            <div class="col-md-3 col-sm-6 mb-4">
                <div class="product-card p-3 rounded">
                    <img src="https://via.placeholder.com/250x150/4a90e2/ffffff?text={{ related.name|truncatechars:15 }}" 
                         class="img-fluid rounded mb-3" alt="{{ related.name }}">
                    <h6 class="mb-2">{{ related.name }}</h6>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="product-price">${{ related.price }}</span>
                        <a href="{% url 'product_detail' related.id %}" class="btn btn-sm btn-outline-primary">
                            View
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}